(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6de8f372"],{2094:function(t,e,a){"use strict";var i=a("25b7"),s=a.n(i);s.a},"25b7":function(t,e,a){},"456d":function(t,e,a){var i=a("4bf8"),s=a("0d58");a("5eda")("keys",(function(){return function(t){return s(i(t))}}))},5118:function(t,e,a){(function(t){var i="undefined"!==typeof t&&t||"undefined"!==typeof self&&self||window,s=Function.prototype.apply;function n(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new n(s.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new n(s.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},n.prototype.unref=n.prototype.ref=function(){},n.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},a("6017"),e.setImmediate="undefined"!==typeof self&&self.setImmediate||"undefined"!==typeof t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!==typeof self&&self.clearImmediate||"undefined"!==typeof t&&t.clearImmediate||this&&this.clearImmediate}).call(this,a("c8ba"))},5270:function(t,e,a){"use strict";var i=a("beeb"),s=a.n(i);s.a},"5eda":function(t,e,a){var i=a("5ca1"),s=a("8378"),n=a("79e5");t.exports=function(t,e){var a=(s.Object||{})[t]||Object[t],l={};l[t]=e(a),i(i.S+i.F*n((function(){a(1)})),"Object",l)}},6017:function(t,e,a){(function(t,e){(function(t,a){"use strict";if(!t.setImmediate){var i,s=1,n={},l=!1,r=t.document,o=Object.getPrototypeOf&&Object.getPrototypeOf(t);o=o&&o.setTimeout?o:t,"[object process]"==={}.toString.call(t.process)?p():f()?v():t.MessageChannel?h():r&&"onreadystatechange"in r.createElement("script")?g():_(),o.setImmediate=c,o.clearImmediate=u}function c(t){"function"!==typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),a=0;a<e.length;a++)e[a]=arguments[a+1];var l={callback:t,args:e};return n[s]=l,i(s),s++}function u(t){delete n[t]}function d(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(a,i);break}}function m(t){if(l)setTimeout(m,0,t);else{var e=n[t];if(e){l=!0;try{d(e)}finally{u(t),l=!1}}}}function p(){i=function(t){e.nextTick((function(){m(t)}))}}function f(){if(t.postMessage&&!t.importScripts){var e=!0,a=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=a,e}}function v(){var e="setImmediate$"+Math.random()+"$",a=function(a){a.source===t&&"string"===typeof a.data&&0===a.data.indexOf(e)&&m(+a.data.slice(e.length))};t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),i=function(a){t.postMessage(e+a,"*")}}function h(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;m(e)},i=function(e){t.port2.postMessage(e)}}function g(){var t=r.documentElement;i=function(e){var a=r.createElement("script");a.onreadystatechange=function(){m(e),a.onreadystatechange=null,t.removeChild(a),a=null},t.appendChild(a)}}function _(){i=function(t){setTimeout(m,0,t)}}})("undefined"===typeof self?"undefined"===typeof t?this:t:self)}).call(this,a("c8ba"),a("f28c"))},"8ea0":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"list"},[a("div",{staticClass:"item"},[a("div",{staticClass:"name lg"},[t._v(t._s(t.list.lg_name))]),a("v-chart",{ref:"pie_lg",staticClass:"pie",attrs:{options:t.pieOpts_lg}}),a("div",{staticClass:"num lg"},[a("count-to",{attrs:{"start-val":0,"end-val":t.list.lg}})],1)],1),a("div",{staticClass:"item"},[a("div",{staticClass:"name md"},[t._v(t._s(t.list.md_name))]),a("v-chart",{ref:"pie_md",staticClass:"pie",attrs:{options:t.pieOpts_md}}),a("div",{staticClass:"num md"},[a("count-to",{attrs:{"start-val":0,"end-val":t.list.md}})],1)],1),a("div",{staticClass:"item"},[a("div",{staticClass:"name sm"},[t._v(t._s(t.list.sm_name))]),a("v-chart",{ref:"pie_sm",staticClass:"pie",attrs:{options:t.pieOpts_sm}}),a("div",{staticClass:"num sm"},[a("count-to",{attrs:{"start-val":0,"end-val":t.list.sm}})],1)],1)])},s=[],n={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},series:[{name:"24h攻击威胁等级占比",type:"pie",radius:["50%","70%"],silent:!0,label:{normal:{show:!1,position:"center"}},labelLine:{normal:{show:!1}},data:[{value:335,name:"高危",label:{show:!0,formatter:"{d}%"},itemStyle:{color:"rgba(81, 139, 233, 0.5)",borderColor:"rgba(81, 139, 233, 1)"}},{value:310,name:"其他",itemStyle:{color:"rgba(77, 140, 255, 0.5)",borderColor:"rgba(77, 140, 255, 1)"}}]}]},l={props:{list:{type:Object},title:{type:String,default:"占比关系图"}},data:function(){return{pieOpts_lg:n,pieOpts_md:n,pieOpts_sm:n}},watch:{list:function(){this.initPie3()}},methods:{initPie3:function(){var t=JSON.parse(JSON.stringify(n));t.series[0].data[0].value=this.list.lg,t.series[0].data[1].value=this.list.md+this.list.sm,t.series[0].data[0].itemStyle.color="rgba(241, 25, 56, 0.5)",t.series[0].data[0].itemStyle.borderColor="rgba(241, 25, 56, 1)",t.series[0].data[0].label["color"]="rgba(241, 25, 56, 1)",this.$refs.pie_lg.clear(),this.pieOpts_lg=t;var e=JSON.parse(JSON.stringify(n));e.series[0].data[0].value=this.list.md,e.series[0].data[1].value=this.list.lg+this.list.sm,e.series[0].data[0].itemStyle.color="rgba(250, 116, 26, 0.5)",e.series[0].data[0].itemStyle.borderColor="rgba(250, 116, 26, 1)",e.series[0].data[0].label["color"]="rgba(250, 116, 26, 1)",this.$refs.pie_lg.clear(),this.pieOpts_md=e;var a=JSON.parse(JSON.stringify(n));a.series[0].data[0].value=this.list.sm,a.series[0].data[1].value=this.list.lg+this.list.md,a.series[0].data[0].itemStyle.color="rgba(255, 196, 27, 0.5)",a.series[0].data[0].itemStyle.borderColor="rgba(255, 196, 27, 1)",a.series[0].data[0].label["color"]="rgba(255, 196, 27, 1)",this.$refs.pie_lg.clear(),this.pieOpts_sm=a}}},r=l,o=(a("e6c8"),a("2877")),c=Object(o["a"])(r,i,s,!1,null,"631455b4",null);e["a"]=c.exports},"8f78":function(t,e,a){},a905:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"box_top"},[a("span",{staticClass:"fullScreen",on:{click:t.fullScreen}},[t._v("全屏")]),a("span",{staticClass:"screenMode",on:{click:t.screenMode}},[a("i",{staticClass:"el-icon-full-screen"})]),a("div",{staticClass:"title"},[t._v(t._s(t.title))]),a("div",{staticClass:"datetime"},[t._v(t._s(t.datetime))])])},s=[],n=a("fa7d"),l=a("5118"),r={props:{title:String},data:function(){return{datetime:null}},created:function(){this.initDateTime()},methods:{fullScreen:n["c"],screenMode:function(){var t=localStorage.getItem("screenMode");t||localStorage.setItem("screenMode","contain"),t="contain"===t?"cover":"contain",localStorage.setItem("screenMode",t),this.$parent.$parent.resizeApp()},initDateTime:function(){var t=this;Object(l["setInterval"])((function(){t.datetime=Object(n["a"])("Y 年 M 月 D 日 hh : mm : ss ")}),1e3)}}},o=r,c=(a("5270"),a("2877")),u=Object(c["a"])(o,i,s,!1,null,"fb36efd8",null);e["a"]=u.exports},beeb:function(t,e,a){},c785:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"appAnalysis"},[a("TOP",{attrs:{title:"应用安全分析"}}),a("div",{staticClass:"row info"},[t._m(0),a("div",{staticClass:"col details"},[a("p",[a("span",[t._v("应用数：")]),a("count-to",{attrs:{"start-val":0,"end-val":t.appList.sum}})],1),a("p",[a("span",[t._v("黑客数：")]),a("count-to",{attrs:{"start-val":0,"end-val":t.hackerCount}})],1),a("p",[a("span",[t._v("终端数：")]),a("count-to",{attrs:{"start-val":0,"end-val":t.terminalCount}})],1),a("p",[a("span",[t._v("探针丢失：")]),a("count-to",{attrs:{"start-val":0,"end-val":0}})],1)]),a("div",{staticClass:"col app"},[a("PIE3",{key:"app",staticClass:"pie3",attrs:{title:"受攻击应用",list:t.appList}})],1)]),t._m(1),a("div",{staticClass:"left box_num"},[a("div",{staticClass:"title"},[t._v("监控攻击总数")]),a("count-to",{staticClass:"number count_to",attrs:{innerSpan:!0,"start-val":0,"end-val":t.attackTotal,separator:""}})],1),a("div",{staticClass:"box_section"},[a("div",{staticClass:"title"},[t._v("遭受攻击应用TOP5")]),a("div",{staticClass:"section"},t._l(t.appTop5,(function(e,i){return a("div",{key:i,staticClass:"row"},[a("div",{staticClass:"name"},[t._v(t._s(e.name)+" 遭受攻击数："+t._s(e.value))]),a("div",{staticClass:"list"},[a("div",{staticClass:"lg",style:e.percent.high}),a("div",{staticClass:"md",style:e.percent.medium}),a("div",{staticClass:"sm",style:e.percent.low}),a("div",{staticClass:"other",style:e.percent.other})])])})),0)]),a("div",{ref:"box_list",staticClass:"box_list"},[t._l(t.apps,(function(e,i){return a("div",{key:i,staticClass:"item",on:{click:function(a){return t.$router.push({name:"attackAnalysis",query:{site_id:e.site_id}})}}},[a("div",{staticClass:"row name",class:e.color},[a("p",[t._v("应用名称："+t._s(e.site_name))]),a("p",[t._v("\n          "+t._s(e.connect_url.slice(0,e.connect_url.indexOf("/iswaf.api")))+"\n        ")])]),a("div",{staticClass:"row level"},[a("p",[t._v("\n          高危"),a("br"),a("count-to",{staticClass:"lg",attrs:{"start-val":0,"end-val":e.attack_level.high||0}})],1),a("p",[t._v("\n          中危"),a("br"),a("count-to",{attrs:{"start-val":0,"end-val":e.attack_level.medium||0}})],1),a("p",[t._v("\n          低危"),a("br"),a("count-to",{attrs:{"start-val":0,"end-val":e.attack_level.low||0}})],1)]),a("div",{staticClass:"row category"},[a("p",[t._v("\n          黑客数\n          "),a("count-to",{attrs:{"start-val":0,"end-val":Object.keys(e.attack_hacker).length}})],1),a("p",[t._v("\n          攻击终端\n          "),a("count-to",{attrs:{"start-val":0,"end-val":Object.keys(e.osname).length}})],1)])])})),t.loading?a("div",{staticClass:"loading"},[a("i",{staticClass:"el-icon-loading"})]):t._e()],2)],1)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col title"},[a("span",[t._v("遭受黑客攻击统计")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"right box_num"},[a("span",{staticClass:"item"},[t._v("高危应用")]),a("span",{staticClass:"item"},[t._v("中危应用")]),a("span",{staticClass:"item"},[t._v("低危应用")]),a("span",{staticClass:"item"},[t._v("正常应用")]),a("span",{staticClass:"item"},[t._v("探针丢失")])])}],n=(a("456d"),a("ac6a"),a("96cf"),a("3b8d")),l=(a("28a5"),a("4ec3")),r=a("fa7d"),o=a("a905"),c=a("8ea0"),u={name:"appAnalysis",components:{TOP:o["a"],PIE3:c["a"]},data:function(){return{timer:null,attackTotal:0,appList:{sum:0,lg:0,md:0,sm:0,lg_name:"高危应用",md_name:"中危应用",sm_name:"低危应用"},terminalCount:0,hackerCount:0,appTop5:[],highAttack:1234,chart:null,isMore:!0,loading:!0,pageIndex:1,pageSize:20,apps:[]}},computed:{highAttackArray:function(){return Object(r["b"])(this.highAttack,99999999).split("")}},created:function(){var t=this;this.loadList(),this.refreshAPI(),this.timer=setInterval((function(){console.log("实时刷新 间隔周期5分种"),t.loadList(),t.refreshAPI()}),3e5)},mounted:function(){var t=this;this.$nextTick((function(){t.$refs.box_list.addEventListener("scroll",t.onListScroll)}))},beforeDestroy:function(){this.timer&&clearInterval(this.timer),this.timer=null},methods:{onListScroll:function(t){var e=this;this.isMore&&!this.loading&&t.target.scrollHeight-30<t.target.scrollTop+t.target.offsetHeight&&(console.log("用户一旦加载第二页就停止自动刷新"),this.timer&&clearInterval(this.timer),this.timer=null,this.loading=!0,setTimeout((function(){e.pageIndex++,e.loadList()}),1e3))},loadList:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(l["c"])(l["a"].getSiteInfos,{remoteip:this.ip,startTime:this.startTime,endTime:this.endTime,pageIndex:this.pageIndex,pageSize:this.pageSize});case 3:e=t.sent,e.data&&(e.data.forEach((function(t){t["color"]="safe",t.attack_level.high>0?t["color"]="high":t.attack_level.medium>0?t["color"]="medium":t.attack_level.low>0&&(t["color"]="low")})),1===this.pageIndex?this.apps=e.data:this.apps=this.apps.concat(e.data),this.isMore=e.data.length===this.pageSize),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),console.log(t.t0);case 10:this.loading=!1;case 11:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),refreshAPI:function(){var t=this;Object(l["d"])(l["a"].getAttackApplicationTop,{startTime:this.startTime,endTime:this.endTime,siteIds:this.siteIds}).then((function(e){var a=e.slice(0,5);a.forEach((function(t){var e=t.level.high||0,a=t.level.medium||0,i=t.level.low||0,s=t.value-e-a-i,n=function(e){return Math.round(e/t.value*100)};t.percent={other:{display:0===n(s)?"none":"block",width:n(s)+"%"},high:{display:0===n(e)?"none":"block",width:n(e)+"%"},low:{display:0===n(i)?"none":"block",width:n(i)+"%"},medium:{display:0===n(a)?"none":"block",width:n(a)+"%"}}})),t.appTop5=a})),Object(l["d"])(l["a"].getTerminalNum).then((function(e){return e&&(t.terminalCount=Object.keys(e).length)})),Object(l["d"])(l["a"].hackerNumber).then((function(e){return e&&(t.hackerCount=e.hackerNum)})),Object(l["d"])(l["a"].getApplicationLevel).then((function(e){t.appList={sum:e.highApplication+e.lowApplication+e.mediumApplication,lg:e.highApplication,md:e.mediumApplication,sm:e.lowApplication,lg_name:"高危应用",md_name:"中危应用",sm_name:"低危应用"}})),Object(l["d"])(l["a"].interceptNumber).then((function(e){return e&&(t.attackTotal=e)}))}}},d=u,m=(a("2094"),a("ec6e"),a("2877")),p=Object(m["a"])(d,i,s,!1,null,"3639145f",null);e["default"]=p.exports},e6c8:function(t,e,a){"use strict";var i=a("8f78"),s=a.n(i);s.a},ec6e:function(t,e,a){"use strict";var i=a("faac"),s=a.n(i);s.a},faac:function(t,e,a){}}]);
//# sourceMappingURL=chunk-6de8f372.e3a0c089.js.map