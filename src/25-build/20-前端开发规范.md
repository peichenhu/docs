# 前端开发规范

> PNPM + ESLint + Prettier + Husky + lint-staged + Commitizen

-   `ESLint` JS 代码检测工具，检测并提示错误或警告信息。
-   `Prettier` 代码自动化格式化工具，更好的代码风格效果。
-   `Husky` Git hooks 工具, 可以在执行 git 命令时，执行自定义的脚本程序。
-   `lint-staged` 是一个前端文件过滤工具, 它仅过滤 Git 代码暂存区文件。当 git commit 时, pre-commit 钩子会启动, 执行 lint-staged 命令。
-   `Commitizen` 使用一组标准化的规则流程来编写提交，使提交更易于阅读。

## 代码规范

```bash
# 安装代码检测和格式化工具
pnpm i -wD eslint prettier eslint-config-prettier eslint-plugin-prettier

# 可选安装
pnpm i -wD @typescript-eslint/eslint-plugin
pnpm i -wD @typescript-eslint/parser
pnpm i -wD eslint-plugin-react
pnpm i -wD eslint-plugin-react-hooks
pnpm i -wD eslint-plugin-vue

# eslint 初始化配置，根据提示进行选择和配置，生成 .eslintrc.yaml
pnpx eslint --init
```

-   配置文件

::: details 查看 .eslintrc.yaml 配置文件
<<< @/../snippets/.eslintrc.yaml
:::

::: details 查看 .prettierignore 配置文件
<<< @/../snippets/.prettierignore{bash}
:::

::: details 查看 .prettierrc.yaml 配置文件
<<< @/../snippets/.prettierrc.yaml
:::

## 提交规范

```bash
# 安装 husky lint-staged
pnpm i -wD husky lint-staged commitizen cz-conventional-changelog

# 生成提交流程配置
pnpx mrm@2 lint-staged

# 执行 pnpx mrm@2 lint-staged 命令之后，
# package.json 里多了一个 lint-staged 配置项，
# package.json scripts 里多了一个 prepare 配置项，
# 且根目录下多了一个 .husky 目录，
# 里面就包含了 pre-commit 文件，
# 里面包含了一个最基础的命令：npx lint-staged。
# .
# ├── .husky
# │   ├── _
# │   ├── .gitignore
# │   └── pre-commit
# ├── package.json
#
# {
#   "scripts": {
# 	    "prepare": "husky install",
#   },
#   "lint-staged": {
#       "*.{js,vue,jsx,ts,tsx,cjs}": "eslint --fix",
#       "*.{js,vue,jsx,ts,tsx,cjs,css,less,html,md,json}": "prettier --write"
#   },
# }

# 安装 commitizen cz-conventional-changelog
pnpm i -wD commitizen cz-conventional-changelog

# 修改配置 package.json
# "scripts": {
# 	"commit": "git-cz"
# },
# "config": {
# 	"commitizen": {
# 		"path": "cz-conventional-changelog"
# 	}
# }

# 测试
git add .
pnpm commit
# 执行命令后，
# 先执行 commitizen，使用一组标准化的规则流程来编写提交信息，使提交更易于阅读。
# 再执行 husky，可以在执行 git 命令时，执行自定义的 lint-staged 脚本程序
# 执行 lint-staged 的 eslint --fix 和 prettier --write 两个流程程序
# 以上全部成功，完成本次 commit 规范提交。
```
